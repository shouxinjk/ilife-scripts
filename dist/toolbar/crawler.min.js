function sxInitialize(e){listenPostMessage();var i="https://biglistoflittlethings.com/ilife-web-wx/images/icon.jpeg";e.append('<div id="sxHideBtnDiv" class="info" style="position:fixed;z-index:999;top:0px;right:0px;background-color:#fff;width:50px;height:20px;border-radius:5px;display:none"><div style="line-height:22px;color:grey;">隐藏</div></div><div id="sxShowBtnDiv" class="info" style="position:fixed;z-index:999;top:0px;right:0;background-color:#fff;width:44px;height:150px;border-radius:5px;padding-left:12px;display:block"><div class="info-general"><img class="general-icon" src="https://biglistoflittlethings.com/ilife-web-wx/images/icon.jpeg" width="30" height="30"/></div><div class="info-detail" style="text-align:left"><div class="info-text info-blank" style="color:#000;font-size:14px;height:100px">查<br/>看<br/>详<br/>情</div></div>');var s="";s+="<div id='sxDiv' style='position:fixed;z-index:998;top:0px;right:0px;background-color:#fff;min-width:400px;width:20%;height:100%;border-radius:5px;display:none;border-left:1px solid silver;'>",s+='<div id="brokerInfoDiv" class="info">',s+='<div class="info-general">',s+='<img id="broker-logo" class="general-icon" src="'+i+'" height="60px"/>',s+="</div>",s+='<div class="info-detail" style="text-align:left">',s+='<div id="broker-name" class="info-text info-blank" style="color:#000;font-weight:bold;font-size:14px;">请扫码绑定达人</div>',s+='<div class="info-text info-blank" id="brokerHint"  style="color:#000">数据完善更利于被用户发现<br/>请补充完善并提交</div>',s+="</div>",s+="</div>",s+='<div id="sxListDiv" class="list">',s+='<iframe id="sxListFrame" src="https://www.biglistoflittlethings.com/ilife-web-wx/login.html?nonce='+(new Date).getTime()+"&targetUrl="+encodeURIComponent("https://www.biglistoflittlethings.com/ilife-web-wx/index_crawler.html")+'" width="100%" height="400px" frameborder="0" sandbox="allow-scripts allow-same-origin">',s+="</div>",s+="</div>",e.append(s),console.log("post message to get sxToolbarStatus "),document.getElementById("sxListFrame").contentWindow.postMessage({sxCookie:{action:"get",key:"sxToolbarStatus"}},"*");s=$("#sxDiv").height()-$("#brokerInfoDiv").height();$("#sxListFrame").height(s),$("#sxHideBtnDiv").click(function(e){$("#sxHideBtnDiv").css("display","none"),$("#sxShowBtnDiv").css("display","block"),$("#sxDiv").css("display","none");var i={sxCookie:{action:"set",key:"sxToolbarStatus",value:{show:!1}}};console.log("try to post sxToolbar status message to iframe.",i),document.getElementById("sxListFrame").contentWindow.postMessage(i,"*")}),$("#sxShowBtnDiv").click(function(e){$("#sxShowBtnDiv").css("display","none"),$("#sxHideBtnDiv").css("display","block"),$("#sxDiv").css("display","block");var i={sxCookie:{action:"set",key:"sxToolbarStatus",value:{show:!0}}};console.log("try to post sxToolbar status message to iframe.",i),document.getElementById("sxListFrame").contentWindow.postMessage(i,"*")})}function listenPostMessage(){var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",function(e){var i,e=e[e.message?"message":"data"];console.log("got message from child window.",e),e&&e.sxBrokerName&&(i="Hi,"+e.sxBrokerName+(e.sxBrokerRealName&&0<e.sxBrokerRealName.trim().length?"("+e.sxBrokerRealName+")":""),i+="&nbsp;<a href='#' style='font-size:12px;color:silver' id='sxChangeBroker' alt='切换账户'><img width='12' text='切换账户' style='vertical-align:middle; margin: 0 auto; ' src='https://www.biglistoflittlethings.com/ilife-web-wx/images/change.png'/></a>",$("#broker-name").html(i),$("#sxChangeBroker").click(function(e){console.log("try to remove broker info."),document.getElementById("sxListFrame").contentWindow.postMessage({sxCookie:{action:"set",key:"sxAuth",value:{}}},"*"),$("#sxListFrame").attr("src","https://www.biglistoflittlethings.com/ilife-web-wx/login.html?nonce="+(new Date).getTime()+"&targetUrl="+encodeURIComponent("https://www.biglistoflittlethings.com/ilife-web-wx/index_crawler.html"))})),e&&e.sxBrokerLogo&&$("#broker-logo").attr("src",e.sxBrokerLogo),e&&e.sxNavigateTo&&(console.log("try to navigate iframe to new src.",e.sxNavigateTo),$("#sxListFrame").attr("src",e.sxNavigateTo)),e&&e.sxCookie&&(i=e.sxCookie,console.log("got message.",i),"return"==i.action&&"sxToolbarStatus"==i.key&&(i.value.show?($("#sxHideBtnDiv").css("display","block"),$("#sxDiv").css("display","block"),$("#sxShowBtnDiv").css("display","none")):($("#sxHideBtnDiv").css("display","none"),$("#sxDiv").css("display","none"),$("#sxShowBtnDiv").css("display","block")))),e&&e.sxRedirect&&(console.log("try to redirect",e.sxRedirect),e.sxTargetWindow?window.open(e.sxRedirect,e.sxTargetWindow):window.open(e.sxRedirect))},!1)}